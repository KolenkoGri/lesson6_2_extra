{"version":3,"file":"../../js/modules/timer.js","names":["timeOfDiscount","document","querySelector","setAttribute","timeOutDiscount","getAttribute","timeDescription","timer","deadline","timerBlockDays","timerBlockHours","timerBlockMinutes","timerBlockSeconds","style","display","start","dateEnd","Date","toLocaleString","timeZone","timeRemaining","getTime","now","seconds","Math","floor","minutes","hours","days","getTimeRemaining","day","hour","textContent","intervalId","setInterval","clearTimeout","timerDays","timerHours","timerMinutes","timerSeconds","querySelectorAll","forEach","t","replaceChildren","insertAdjacentHTML"],"sources":["modules/timer.js"],"mappings":"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","sourcesContent":["const timeOfDiscount = document.querySelector('.gallery__text--timer');\r\ntimeOfDiscount.setAttribute('data-deadline', '2023/07/30 14:56');\r\nconst timeOutDiscount = timeOfDiscount.getAttribute('data-deadline');\r\nconst timeDescription = document.querySelector('.gallery__text--descrip');\r\n\r\n\r\n\r\nconst timer = (deadline) => {\r\n    const timerBlockDays = document.querySelector('.gallery__big-figure--days');\r\n    const timerBlockHours = document.querySelector('.gallery__big-figure--hours');\r\n    const timerBlockMinutes = document.querySelector('.gallery__big-figure--minutes');\r\n    const timerBlockSeconds = document.querySelector('.gallery__big-figure--seconds');\r\n    timerBlockSeconds.style.display = 'none';\r\n\r\n    const getTimeRemaining = () => {\r\n        const option = {\r\n            timeZone: 'Europe/Moscow',\r\n        }\r\n        const dateEnd = new Date(deadline).toLocaleString('ja', option);\r\n        const dateStop = new Date(dateEnd).getTime();\r\n        const dateNow = Date.now();      \r\n        const timeRemaining = dateStop - dateNow;\r\n\r\n        const seconds = Math.floor(timeRemaining / 1000 % 60);\r\n        const minutes = Math.floor(timeRemaining / 1000 / 60 % 60 );\r\n        const hours = Math.floor(timeRemaining / 1000 / 60 / 60 % 24);\r\n        const days = Math.floor(timeRemaining / 1000 / 60 / 60 / 24 % 30); \r\n\r\n        return {\r\n            timeRemaining,\r\n            seconds,\r\n            minutes,\r\n            hours,\r\n            days,\r\n        }\r\n    }\r\n\r\n    const start = () => {\r\n        const timer = getTimeRemaining();\r\n        let day = ' дней ';\r\n        let hour = ' часов ';\r\n        let minutes = ' минут ';\r\n        let seconds = ' секунд ';\r\n\r\n        if (timer.seconds % 10 === 1 && timer.seconds !== 11){\r\n            seconds = ' секунда ';\r\n        } else if (timer.seconds % 10 >= 2 && timer.seconds % 10 <= 4 ){\r\n            seconds = ' секунды '\r\n        }\r\n\r\n        if (timer.days % 10 === 1 && timer.days !== 11){\r\n            day = ' день ';\r\n        } else if (timer.days % 10 >= 2 && timer.days % 10 <= 4 ){\r\n            day = ' дня '\r\n        }\r\n\r\n        if (timer.hours % 10 === 1 && timer.hours !== 11){\r\n            hour = ' час ';\r\n        } else if (timer.hours % 10 >= 2 && timer.hours % 10 <= 4 ){\r\n            hour = ' часа '\r\n        }\r\n\r\n        if (timer.minutes % 10 === 1 && timer.minutes !== 11){\r\n            minutes = ' минута ';\r\n        } else if (timer.minutes % 10 >= 2 && timer.minutes % 10 <= 4 ){\r\n            minutes = ' минуты '\r\n        }\r\n\r\n        timerBlockDays.textContent = timer.days < 10 ? '0' + timer.days + day : timer.days + day;\r\n        timerBlockHours.textContent = timer.hours < 10 ? \"0\" + timer.hours + hour : timer.hours  + hour;\r\n        timerBlockMinutes.textContent = timer.minutes <10 ? '0' + timer.minutes + minutes : timer.minutes + minutes;\r\n        timerBlockSeconds.textContent = timer.seconds <10 ? '0' + timer.seconds + seconds : timer.seconds + seconds;\r\n\r\n        let intervalId = setInterval(start, 60000);\r\n\r\n        if(timer.days === 0) {\r\n            timerBlockSeconds.style.display = 'inline-block';\r\n            timerBlockDays.style.display = 'none';\r\n            intervalId = setInterval(start, 1000);\r\n        }\r\n        \r\n        if(timer.timeRemaining <= 0) {\r\n            clearTimeout(intervalId);\r\n            timeOfDiscount.style.display = 'none';\r\n            timeDescription.style.display = 'none';\r\n            // Либо можно сделать через добавление класса \r\n        }\r\n\r\n        const timerDays = timer.days;\r\n        const timerHours = timer.hours;\r\n        const timerMinutes = timer.minutes;\r\n        const timerSeconds = timer.seconds;\r\n\r\n        return {\r\n            timerDays,\r\n            timerHours,\r\n            timerMinutes,\r\n            timerSeconds,\r\n            day,\r\n            hour,\r\n            minutes,\r\n            seconds,\r\n        }\r\n    }\r\n\r\n    start();\r\n\r\n    // Плагин для таймера \r\n\r\n    const startTimerPlugin = () => {\r\n        const {timerDays,\r\n            timerHours,\r\n            timerMinutes,\r\n            timerSeconds,\r\n            day,\r\n            hour,\r\n            minutes,\r\n            seconds,} = start();\r\n        \r\n        const timerPlugin = document.querySelectorAll('[data-timer-deadline]');\r\n\r\n        timerPlugin.forEach((t) => {\r\n            t.replaceChildren();\r\n            t.insertAdjacentHTML('afterbegin', `\r\n            <p class=\"gallery__text gallery__text--descrip\"> До конца акции:</p>\r\n            <p class=\"gallery__text gallery__text--timer\"> \r\n                <span class=\"gallery__big-figure gallery__big-figure--days\">${timerDays < 10 ? '0' + timerDays + day : timerDays + day}</span>\r\n                <span class=\"gallery__big-figure gallery__big-figure--hours\">${timerHours < 10 ? \"0\" + timerHours + hour : timerHours + hour}</span>\r\n                <span class=\"gallery__big-figure gallery__big-figure--minutes\">${timerMinutes <10 ? '0' + timerMinutes + minutes : timerMinutes + minutes}</span>\r\n                <span class=\"gallery__big-figure gallery__big-figure--seconds\">${timerSeconds <10 ? '0' + timerSeconds + seconds : timerSeconds + seconds}</span> \r\n            </p>\r\n            `)\r\n        })\r\n    }\r\n\r\n    setInterval(startTimerPlugin, 1000);\r\n    \r\n};\r\n\r\ntimer(timeOutDiscount);\r\n\r\n\r\n"]}