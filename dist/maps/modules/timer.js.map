{"version":3,"file":"../../js/modules/timer.js","names":["timeOfDiscount","document","querySelector","setAttribute","timeOutDiscount","getAttribute","timeDescription","timer","deadline","timerBlockDays","timerBlockHours","timerBlockMinutes","timerBlockSeconds","style","display","start","dateEnd","Date","toLocaleString","timeZone","timeRemaining","getTime","now","seconds","Math","floor","minutes","hours","days","getTimeRemaining","day","hour","textContent","intervalId","setInterval","clearTimeout","timerDays","timerHours","timerMinutes","timerSeconds","querySelectorAll","forEach","t","replaceChildren","insertAdjacentHTML"],"sources":["modules/timer.js"],"mappings":"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","sourcesContent":["const timeOfDiscount = document.querySelector('.gallery__text--timer');\ntimeOfDiscount.setAttribute('data-deadline', '2023/07/30 14:56');\nconst timeOutDiscount = timeOfDiscount.getAttribute('data-deadline');\nconst timeDescription = document.querySelector('.gallery__text--descrip');\n\n\n\nconst timer = (deadline) => {\n    const timerBlockDays = document.querySelector('.gallery__big-figure--days');\n    const timerBlockHours = document.querySelector('.gallery__big-figure--hours');\n    const timerBlockMinutes = document.querySelector('.gallery__big-figure--minutes');\n    const timerBlockSeconds = document.querySelector('.gallery__big-figure--seconds');\n    timerBlockSeconds.style.display = 'none';\n\n    const getTimeRemaining = () => {\n        const option = {\n            timeZone: 'Europe/Moscow',\n        }\n        const dateEnd = new Date(deadline).toLocaleString('ja', option);\n        const dateStop = new Date(dateEnd).getTime();\n        const dateNow = Date.now();      \n        const timeRemaining = dateStop - dateNow;\n\n        const seconds = Math.floor(timeRemaining / 1000 % 60);\n        const minutes = Math.floor(timeRemaining / 1000 / 60 % 60 );\n        const hours = Math.floor(timeRemaining / 1000 / 60 / 60 % 24);\n        const days = Math.floor(timeRemaining / 1000 / 60 / 60 / 24 % 30); \n\n        return {\n            timeRemaining,\n            seconds,\n            minutes,\n            hours,\n            days,\n        }\n    }\n\n    const start = () => {\n        const timer = getTimeRemaining();\n        let day = ' дней ';\n        let hour = ' часов ';\n        let minutes = ' минут ';\n        let seconds = ' секунд ';\n\n        if (timer.seconds % 10 === 1 && timer.seconds !== 11){\n            seconds = ' секунда ';\n        } else if (timer.seconds % 10 >= 2 && timer.seconds % 10 <= 4 ){\n            seconds = ' секунды '\n        }\n\n        if (timer.days % 10 === 1 && timer.days !== 11){\n            day = ' день ';\n        } else if (timer.days % 10 >= 2 && timer.days % 10 <= 4 ){\n            day = ' дня '\n        }\n\n        if (timer.hours % 10 === 1 && timer.hours !== 11){\n            hour = ' час ';\n        } else if (timer.hours % 10 >= 2 && timer.hours % 10 <= 4 ){\n            hour = ' часа '\n        }\n\n        if (timer.minutes % 10 === 1 && timer.minutes !== 11){\n            minutes = ' минута ';\n        } else if (timer.minutes % 10 >= 2 && timer.minutes % 10 <= 4 ){\n            minutes = ' минуты '\n        }\n\n        timerBlockDays.textContent = timer.days < 10 ? '0' + timer.days + day : timer.days + day;\n        timerBlockHours.textContent = timer.hours < 10 ? \"0\" + timer.hours + hour : timer.hours  + hour;\n        timerBlockMinutes.textContent = timer.minutes <10 ? '0' + timer.minutes + minutes : timer.minutes + minutes;\n        timerBlockSeconds.textContent = timer.seconds <10 ? '0' + timer.seconds + seconds : timer.seconds + seconds;\n\n        let intervalId = setInterval(start, 60000);\n\n        if(timer.days === 0) {\n            timerBlockSeconds.style.display = 'inline-block';\n            timerBlockDays.style.display = 'none';\n            intervalId = setInterval(start, 1000);\n        }\n        \n        if(timer.timeRemaining <= 0) {\n            clearTimeout(intervalId);\n            timeOfDiscount.style.display = 'none';\n            timeDescription.style.display = 'none';\n            // Либо можно сделать через добавление класса \n        }\n\n        const timerDays = timer.days;\n        const timerHours = timer.hours;\n        const timerMinutes = timer.minutes;\n        const timerSeconds = timer.seconds;\n\n        return {\n            timerDays,\n            timerHours,\n            timerMinutes,\n            timerSeconds,\n            day,\n            hour,\n            minutes,\n            seconds,\n        }\n    }\n\n    start();\n\n    // Плагин для таймера \n\n    const startTimerPlugin = () => {\n        const {timerDays,\n            timerHours,\n            timerMinutes,\n            timerSeconds,\n            day,\n            hour,\n            minutes,\n            seconds,} = start();\n        \n        const timerPlugin = document.querySelectorAll('[data-timer-deadline]');\n\n        timerPlugin.forEach((t) => {\n            t.replaceChildren();\n            t.insertAdjacentHTML('afterbegin', `\n            <p class=\"gallery__text gallery__text--descrip\"> До конца акции:</p>\n            <p class=\"gallery__text gallery__text--timer\"> \n                <span class=\"gallery__big-figure gallery__big-figure--days\">${timerDays < 10 ? '0' + timerDays + day : timerDays + day}</span>\n                <span class=\"gallery__big-figure gallery__big-figure--hours\">${timerHours < 10 ? \"0\" + timerHours + hour : timerHours + hour}</span>\n                <span class=\"gallery__big-figure gallery__big-figure--minutes\">${timerMinutes <10 ? '0' + timerMinutes + minutes : timerMinutes + minutes}</span>\n                <span class=\"gallery__big-figure gallery__big-figure--seconds\">${timerSeconds <10 ? '0' + timerSeconds + seconds : timerSeconds + seconds}</span> \n            </p>\n            `)\n        })\n    }\n\n    setInterval(startTimerPlugin, 1000);\n    \n};\n\ntimer(timeOutDiscount);\n\n\n"]}