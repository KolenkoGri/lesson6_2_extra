{"version":3,"file":"../../js/modules/article.js","names":["renderPage","loadArticles","main","document","querySelector","renderArticles","async","data","replaceChildren","insertAdjacentHTML","articleList","paginationArrowLeft","paginationArrowRight","pagination","map","item","id","title","i","meta","pages","addEventListener","page","loadPagination","querySelectorAll","forEach","p","textContent","footerItemBlog","e","preventDefault","classList","toggle"],"sources":["modules/article.js"],"mappings":"OAAQA,eAAiB,mBAChBC,iBAAoB,WAE7B,MAAMC,KAAOC,SAASC,cAAc,QAE9BC,eAAiBC,UACnB,MAAMC,QAAaN,eACnBC,KAAKM,kBACLN,KAAKO,mBAAmB,aAAc,stBAqBtC,MAAMC,EAAcP,SAASC,cAAc,kBACrCO,EAAsBR,SAASC,cAAc,2BAC7CQ,EAAuBT,SAASC,cAAc,4BAC9CS,EAAaV,SAASC,cAAc,sBAE1CG,EAAKA,KAAKO,KAAKC,IACXL,EAAYD,mBAAmB,YAAa,qMAIWM,EAAKC,QAAQD,EAAKE,2nBAcvE,IAGN,IAAK,IAAIC,EAAI,EAAGA,GAAKX,EAAKY,KAAKN,WAAWO,MAAOF,IAC7CL,EAAWJ,mBAAmB,YAAa,2CACXS,eAGpCP,EAAoBU,iBAAiB,SAAS,KACT,IAA9Bd,EAAKY,KAAKN,WAAWS,OACpBZ,EAAYF,kBACZK,EAAWL,kBACXP,aAAa,+CAA8CM,EAAKY,KAAKN,WAAWS,KAAO,IACvFjB,iBACJ,IAGJO,EAAqBS,iBAAiB,SAAS,KACxCd,EAAKY,KAAKN,WAAWS,OAASf,EAAKY,KAAKN,WAAWO,QAClDV,EAAYF,kBACZK,EAAWL,kBACXP,aAAa,8CAA8CM,EAAKY,KAAKN,WAAWS,KAAO,KACvFjB,iBACJ,GACF,EAGAkB,eAAiBjB,UACMH,SAASqB,iBAAiB,uBAClCC,SAASC,IACtBA,EAAEL,iBAAiB,SAAS,KACxBX,YAAYF,kBACZK,WAAWL,kBACXP,aAAa,8CAA8CyB,EAAEC,eAC7DtB,gBAAgB,GAClB,GACJ,EAGAuB,eAAiBzB,SAASC,cAAc,sBAC9CwB,eAAeP,iBAAiB,SAASf,MAAOuB,IAC5CA,EAAEC,uBACIzB,uBACAkB,iBACOpB,SAASC,cAAc,SAC/B2B,UAAUC,OAAO,YAAY","sourcesContent":["import {renderPage} from \"./page.js\";\r\nimport { loadArticles } from \"./api.js\";\r\n\r\nconst main = document.querySelector('main');\r\n\r\nconst renderArticles = async () => {\r\n    const data = await loadArticles();\r\n    main.replaceChildren();\r\n    main.insertAdjacentHTML('afterbegin', `\r\n    <section class=\"article\">\r\n        <div class=\"container article__container\">\r\n            <div class=\"page__path\">\r\n                <a class=\"page__name\" href=\"index.html\">Главная</a>\r\n                <div class=\"page__arrow\"></div>\r\n                <div class=\"page__name\">Блог</div>\r\n            </div>\r\n            <ul class=\"article__list\"></ul>\r\n\r\n            <div class=\"pagination\">\r\n                    <a class=\"pagination__arrow pagination__arrow-left\" href=\"\"></a>\r\n                    <div class=\"pagination__pages\">\r\n\r\n                    </div>\r\n                    <a class=\"pagination__arrow pagination__arrow-right\" href=\"\"></a>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    `)\r\n\r\n    const articleList = document.querySelector('.article__list');\r\n    const paginationArrowLeft = document.querySelector('.pagination__arrow-left');\r\n    const paginationArrowRight = document.querySelector('.pagination__arrow-right');\r\n    const pagination = document.querySelector('.pagination__pages');\r\n\r\n    data.data.map((item) => {\r\n        articleList.insertAdjacentHTML('beforeend', `\r\n        <li class=\"article__item\">\r\n            <div class=\"article__image--main\"></div>\r\n            <div class=\"article__info\">\r\n                <a class=\"article__title\" href=\"page.html?id=${item.id}\" >${item.title}</a>\r\n                <div class=\"article__date\">22 октября 2021, 12:45</div>\r\n                <div class=\"article__metrics\">\r\n                    <div class=\"article__views\">\r\n                        <div class=\"article__image--eye\"></div>\r\n                        <div class=\"article__count--eye\">1.9K</div>\r\n                    </div>\r\n                    <div class=\"article__comments\">\r\n                        <div class=\"article__image--message\"></div>\r\n                        <div class=\"article__count--message\">0</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </li> \r\n        `);\r\n    });\r\n\r\n    for (let i = 1; i <= data.meta.pagination.pages; i ++ ){\r\n        pagination.insertAdjacentHTML('beforeend', `\r\n        <a class=\"pagination__number\">${i}</a>\r\n    `)\r\n    }\r\n    paginationArrowLeft.addEventListener('click', () => {\r\n        if(data.meta.pagination.page !== 1) {\r\n            articleList.replaceChildren();\r\n            pagination.replaceChildren();\r\n            loadArticles(`https://gorest.co.in/public-api/posts?page=${data.meta.pagination.page - 1}`);\r\n            renderArticles();\r\n        }\r\n    });\r\n\r\n    paginationArrowRight.addEventListener('click', () => {\r\n        if(data.meta.pagination.page !== data.meta.pagination.pages) {\r\n            articleList.replaceChildren();\r\n            pagination.replaceChildren();\r\n            loadArticles(`https://gorest.co.in/public-api/posts?page=${data.meta.pagination.page + 1}`);\r\n            renderArticles();\r\n        }\r\n    });\r\n}\r\n\r\nconst loadPagination = async () => {\r\n    const paginationNumber = document.querySelectorAll('.pagination__number');\r\n    paginationNumber.forEach((p) => {\r\n        p.addEventListener('click', () => {\r\n            articleList.replaceChildren();\r\n            pagination.replaceChildren();\r\n            loadArticles(`https://gorest.co.in/public-api/posts?page=${p.textContent}`);\r\n            renderArticles();\r\n        });\r\n    });\r\n};\r\n\r\nconst footerItemBlog = document.querySelector('.footer__item-blog');\r\nfooterItemBlog.addEventListener('click', async (e) => {\r\n    e.preventDefault();\r\n    await renderArticles();\r\n    await loadPagination();\r\n    const menu = document.querySelector('.menu');\r\n    menu.classList.toggle('menu-open');\r\n\r\n    // const articleTitle = document.querySelectorAll('.article__title');\r\n    // // console.log(articleTitle);\r\n    // articleTitle.forEach((el) => {\r\n    //     el.addEventListener('click', (e) => {\r\n    //         // console.log(e.target);\r\n    //         // e.preventDefault();\r\n    //         renderPage();\r\n    //     });\r\n    // });\r\n});\r\n\r\n\r\n\r\n\r\n"]}